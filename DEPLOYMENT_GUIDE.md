# SmartBet Deployment Guide ğŸš€

Complete guide to deploy SmartBet on **Render (Backend)** + **Vercel (Frontend)**

---

## ğŸ“‹ Prerequisites

Before deploying, make sure you have:

1. âœ… GitHub account with your code pushed
2. âœ… Render account (https://render.com) - FREE
3. âœ… Vercel account (https://vercel.com) - FREE
4. âœ… SportMonks API token (https://www.sportmonks.com)

---

## ğŸ¯ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vercel        â”‚         â”‚   Render        â”‚
â”‚   (Frontend)    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   (Backend)     â”‚
â”‚   Next.js       â”‚   API   â”‚   Django        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚   PostgreSQL    â”‚
                            â”‚   (Free Tier)   â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Part 1: Deploy Backend to Render ğŸ

### Step 1: Push Code to GitHub

```bash
git add .
git commit -m "Prepare for production deployment"
git push origin main
```

### Step 2: Create Render Account & Connect GitHub

1. Go to https://render.com and sign up (use GitHub login for easy integration)
2. Click "New +" â†’ Select "Blueprint"
3. Connect your GitHub account
4. Select your `smartbet` repository
5. Render will detect the `render.yaml` file automatically

### Step 3: Configure Environment Variables

In Render dashboard, set these environment variables:

**Required:**
- `DEBUG` = `False`
- `ALLOWED_HOSTS` = `your-backend-url.onrender.com` (you'll get this after deployment)
- `FRONTEND_URL` = `https://your-frontend.vercel.app` (you'll set this later)
- `SPORTMONKS_TOKEN` = `your-api-token-from-sportmonks`
- `SPORTMONKS_API_TOKEN` = `your-api-token-from-sportmonks`

**Auto-generated by Render:**
- `DJANGO_SECRET_KEY` (auto-generated)
- `DATABASE_URL` (auto-configured with PostgreSQL)

### Step 4: Deploy

1. Click "Apply" or "Create Web Service"
2. Render will:
   - Install Python dependencies
   - Create PostgreSQL database
   - Run migrations
   - Collect static files
   - Start gunicorn server

3. Wait 5-10 minutes for first deployment
4. Your backend will be available at: `https://your-app-name.onrender.com`

### Step 5: Test Backend

Visit: `https://your-backend-url.onrender.com/api/health/`

You should see:
```json
{"status": "healthy", "service": "smartbet-backend"}
```

---

## Part 2: Deploy Frontend to Vercel âš¡

### Step 1: Create Vercel Account

1. Go to https://vercel.com
2. Sign up with GitHub (recommended)

### Step 2: Import Project

1. Click "Add New" â†’ "Project"
2. Import your GitHub repository
3. Vercel will detect it's a Next.js project
4. Select the `frontend` folder as the root directory

### Step 3: Configure Environment Variables

Add these environment variables in Vercel:

- **Key:** `NEXT_PUBLIC_API_URL`
- **Value:** `https://your-backend-url.onrender.com`

### Step 4: Deploy

1. Click "Deploy"
2. Vercel will build and deploy your frontend (takes 2-3 minutes)
3. Your frontend will be available at: `https://your-app-name.vercel.app`

### Step 5: Update Backend CORS Settings

**IMPORTANT:** Go back to Render dashboard and update:

1. Find your backend service
2. Go to "Environment"
3. Update `FRONTEND_URL` to: `https://your-app-name.vercel.app`
4. Update `ALLOWED_HOSTS` to: `your-backend-url.onrender.com,your-app-name.vercel.app`
5. Save changes (backend will redeploy automatically)

---

## ğŸ”§ Post-Deployment Tasks

### 1. Create Django Superuser

Access Render Shell:
1. Go to Render dashboard â†’ Your service
2. Click "Shell" tab
3. Run:
```bash
python manage.py createsuperuser
```

### 2. Test the Application

- âœ… Visit your frontend: `https://your-app.vercel.app`
- âœ… Check backend admin: `https://your-backend.onrender.com/admin/`
- âœ… Test API endpoints work
- âœ… Check predictions are loading

### 3. Setup Cron Jobs (Optional)

For automated tasks (updating predictions, etc.), in Render:
1. Go to "Cron Jobs" (separate from web service)
2. Add commands like:
   - `python manage.py update_results` (daily)
   - `python manage.py fetch_odds` (hourly)

---

## ğŸ’° Cost Breakdown

### FREE TIER (Start Here)

**Render:**
- Web Service: FREE (sleeps after 15 min inactivity)
- PostgreSQL: FREE (90-day expiration, 1GB storage)

**Vercel:**
- Hosting: FREE
- Bandwidth: 100GB/month FREE
- Build minutes: Unlimited

**Total: $0/month** âœ¨

### PAID TIER (Recommended for Production)

**Render:**
- Web Service (Starter): **$7/month** (always-on, 512MB RAM)
- PostgreSQL (Starter): **$7/month** (no expiration, 1GB storage)

**Vercel:**
- Pro: **$20/month** (optional, for advanced features)

**Total: $14-34/month** ğŸ’µ

---

## ğŸ” Security Checklist

Before going live:

- [ ] `DEBUG = False` in production
- [ ] Strong `DJANGO_SECRET_KEY` (auto-generated by Render)
- [ ] `ALLOWED_HOSTS` properly configured
- [ ] CORS origins restricted to your frontend URL
- [ ] SSL/HTTPS enabled (automatic on both platforms)
- [ ] Environment variables never committed to Git
- [ ] Admin panel access restricted (strong password)

---

## ğŸ› Troubleshooting

### Backend Issues

**Problem:** Backend won't start
- **Solution:** Check logs in Render dashboard â†’ "Logs" tab
- Common issues: Missing environment variables, migration errors

**Problem:** Database connection errors
- **Solution:** Make sure `DATABASE_URL` is set (auto-set by Render)

**Problem:** Static files not loading
- **Solution:** Run `python manage.py collectstatic` (auto-run by build.sh)

### Frontend Issues

**Problem:** Can't connect to backend
- **Solution:** Check `NEXT_PUBLIC_API_URL` is correct in Vercel
- Make sure backend URL includes `https://`

**Problem:** CORS errors
- **Solution:** Update `FRONTEND_URL` in Render backend environment variables

### Free Tier Limitations

**Problem:** Backend sleeps after inactivity
- **Solution:** 
  - Upgrade to Starter plan ($7/mo) for always-on
  - OR use a service like UptimeRobot to ping your backend every 5 minutes

---

## ğŸ“Š Monitoring & Logs

### Render Logs
- Dashboard â†’ Your Service â†’ "Logs" tab
- Real-time streaming logs
- Filter by errors, warnings, etc.

### Vercel Logs
- Dashboard â†’ Your Project â†’ "Logs" tab
- Function logs, build logs
- Analytics available

---

## ğŸ”„ Updating Your Deployment

### Backend Updates

1. Push code to GitHub:
```bash
git add .
git commit -m "Update backend"
git push origin main
```

2. Render auto-deploys on every push to `main` branch

### Frontend Updates

1. Push code to GitHub:
```bash
cd frontend
git add .
git commit -m "Update frontend"
git push origin main
```

2. Vercel auto-deploys on every push

---

## ğŸ“ Advanced Configuration

### Custom Domain (Optional)

**Vercel:**
1. Dashboard â†’ Your Project â†’ "Settings" â†’ "Domains"
2. Add your domain (e.g., `smartbet.com`)
3. Follow DNS configuration instructions

**Render:**
1. Dashboard â†’ Your Service â†’ "Settings" â†’ "Custom Domains"
2. Add your domain (e.g., `api.smartbet.com`)
3. Update DNS records

### Environment-based Deployment

Create separate environments:
- `main` branch â†’ Production
- `develop` branch â†’ Staging

Both Render and Vercel support branch-based deployments.

---

## âœ… Deployment Complete!

Your SmartBet platform is now live! ğŸ‰

**Next Steps:**
1. Test all features thoroughly
2. Monitor error logs for first few days
3. Set up analytics (Google Analytics, etc.)
4. Consider upgrading to paid tier for better performance

**Support:**
- Render Docs: https://render.com/docs
- Vercel Docs: https://vercel.com/docs
- Django Deployment: https://docs.djangoproject.com/en/stable/howto/deployment/

---

## ğŸ“ Need Help?

- Check the troubleshooting section above
- Review Render/Vercel documentation
- Check application logs for specific errors

Good luck! ğŸš€

